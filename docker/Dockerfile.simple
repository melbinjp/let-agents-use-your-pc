# Simple Dockerfile for script validation testing
FROM ubuntu:22.04

# Set non-interactive frontend
ENV DEBIAN_FRONTEND=noninteractive

# Install basic dependencies
RUN apt-get update && apt-get install -y \
    bash \
    curl \
    openssh-server \
    sudo \
    --no-install-recommends && \
    rm -rf /var/lib/apt/lists/*

# Configure SSH server basic settings
RUN mkdir -p /run/sshd

# Copy scripts for testing
COPY healthcheck.sh /healthcheck.sh
COPY connection-info.sh /app/connection-info.sh
COPY hardware-detection.sh /app/hardware-detection.sh

# Make scripts executable
RUN chmod +x /healthcheck.sh /app/connection-info.sh /app/hardware-detection.sh

# Test script syntax
RUN bash -n /healthcheck.sh
RUN bash -n /app/connection-info.sh  
RUN bash -n /app/hardware-detection.sh

# Simple entrypoint for testing
CMD ["/bin/bash", "-c", "echo 'Docker validation test successful' && /healthcheck.sh"]